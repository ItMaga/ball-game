(()=>{"use strict";const t=function(){function t(){}var i;return i=t,t.instance=document.getElementById("canvas"),t.context=i.instance.getContext("2d"),t.width=i.instance.width,t.height=i.instance.height,t}();var i,e;!function(t){t.ArrowRight="ArrowRight",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown"}(i||(i={})),function(t){t[t.INACTIVE=0]="INACTIVE",t[t.ACTIVE=1]="ACTIVE"}(e||(e={}));const n=function(){function e(){this.transform=t.width/2-35,this.directions=new Set,this.availableDirections=[i.ArrowRight,i.ArrowLeft],this.y=t.height-12,this.drawPlayer(),document.addEventListener("keydown",this.keyDownListener.bind(this),!1),document.addEventListener("keyup",this.keyUpListener.bind(this),!1)}return Object.defineProperty(e.prototype,"playerCoordinates",{get:function(){return{x1:this.transform,x2:this.transform+70,y1:this.y,y2:this.y+12}},enumerable:!1,configurable:!0}),e.prototype.keyDownListener=function(t){this.availableDirections.includes(t.code)&&(t.preventDefault(),this.directions.add(t.code))},e.prototype.keyUpListener=function(t){this.directions.has(t.code)&&this.directions.delete(t.code)},e.prototype.loopCallback=function(){this.drawPlayer()},e.prototype.drawPlayer=function(){this.directions.has(i.ArrowRight)&&this.transform<t.width-70?this.transform+=10:this.directions.has(i.ArrowLeft)&&this.transform>0&&(this.transform-=10),t.context.fillStyle="white",t.context.fillRect(this.transform,this.y,70,12)},e}();var o=function(){return o=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},o.apply(this,arguments)};const s=function(){function i(i){this.cells=[],this.cellsOnLine=Math.round(t.width/50),this.initCells(),this.score=i}return i.prototype.loopCallback=function(){this.drawCells()},i.prototype.inactivateCell=function(t,i){this.cells.splice(t,1,o(o({},i),{status:e.INACTIVE})),this.score.increment()},i.prototype.initCells=function(){for(var t=0;t<3;t++)for(var i=0;i<this.cellsOnLine;i++){var n=50*i,o=12*t;this.pushCell({x1:n,x2:n+50,y1:o,y2:o+12,status:e.ACTIVE})}},i.prototype.drawCells=function(){this.cells.forEach((function(i){var n=i.x1,o=i.y1;i.status===e.ACTIVE&&(t.context.fillStyle="white",t.context.rect(n,o,50,12),t.context.fill(),t.context.stroke())}))},i.prototype.pushCell=function(t){this.cells.push(t)},i}(),r=function(){function i(i,e){this.x=Math.round(t.width/2),this.y=Math.round(t.height-30),this.dx=2,this.dy=-2,this.drawBall(),this.cells=i,this.player=e}return i.prototype.loopCallback=function(){this.drawBall(),this.detectCollision();var i=this.x+this.dx,e=this.y+this.dy;(i>t.width-8||i<8)&&(this.dx=-this.dx),e<8||this.isPlayerCollision?this.dy=-this.dy:e>t.height-8&&console.log("GAME OVER"),this.x+=this.dx,this.y+=this.dy},Object.defineProperty(i.prototype,"isPlayerCollision",{get:function(){var t=this.player.playerCoordinates,i=t.x1,e=t.x2,n=t.y1,o=t.y2;return this.x+8>i&&this.x+8<e&&this.y+8>n&&this.y+8<o},enumerable:!1,configurable:!0}),i.prototype.detectCollision=function(){var t=this,i=this.cells.cells.findIndex((function(i){return i.status===e.ACTIVE&&t.y+8>i.y1&&t.y-8<i.y2&&t.x+8>i.x1&&t.x-8<i.x2}));return i>=0&&(this.dy=-this.dy,this.cells.inactivateCell(i,this.cells.cells[i]),!0)},i.prototype.drawBall=function(){t.context.beginPath(),t.context.arc(this.x,this.y,8,0,2*Math.PI),t.context.fill(),t.context.closePath()},i}(),l=function(){function t(t,i){this.RAFId=0,this.lastTime=0,this.delay=t,this.callback=i}return t.prototype.RAFHandler=function(t){this.RAFId=window.requestAnimationFrame(this.RAFHandler.bind(this)),t-this.lastTime<this.delay||(this.lastTime=t,this.callback())},t.prototype.start=function(){this.RAFId=window.requestAnimationFrame(this.RAFHandler.bind(this))},t.prototype.stop=function(){window.cancelAnimationFrame(this.RAFId)},t}(),h=function(){function t(){this.scoreElement=document.getElementById("score"),this.score=0}return t.prototype.increment=function(){this.score+=10,this.updateScore()},t.prototype.updateScore=function(){this.scoreElement.innerText=String(this.score)},t}();new(function(){function i(){this.score=new h,this.cells=new s(this.score),this.player=new n,this.ball=new r(this.cells,this.player),this.gameLoop=new l(10,this.gameLoopCallback.bind(this)),this.gameLoop.start()}return i.prototype.gameLoopCallback=function(){i.clearCanvas(),this.ball.loopCallback(),this.player.loopCallback(),this.cells.loopCallback()},i.clearCanvas=function(){t.context.clearRect(0,0,t.width,t.height)},i}()),console.log("Hello World!")})();